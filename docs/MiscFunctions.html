<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.2" />
<title>MiscFunctions API documentation</title>
<meta name="description" content="" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>MiscFunctions</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import tkinter as tk
from tkinter import ttk
import json
import os
from Interface import *

database = {}
pacemaker_values = {}
user_info = []

# Shift value is hardcoded here as a constant for use later in the encrypt/decrypt functions
SHIFT = 2

# Database dump location and upload location is going to be made a constant so it doesnt constantly need to be remade.
DUMP_LOCATION = os.getcwd() + &#39;\database.json&#39;
UPLOAD_LOCATION = os.getcwd() + &#39;\SerialComm.json&#39;

&#39;&#39;&#39; DATABASE &#39;&#39;&#39;
# Checks if the json file exists
if os.path.exists(DUMP_LOCATION):
    # if it exists, load in that database as the current database.
    with open(DUMP_LOCATION) as f:
        database = json.load(f)
else:
    # Otherwise initialize a new database. 
    database = {}

&#39;&#39;&#39; PACEMAKER VALUES &#39;&#39;&#39;
# Checks if the json file exists
if os.path.exists(UPLOAD_LOCATION):
    # if it exists, load in that database as the current database.
    with open(UPLOAD_LOCATION) as f:
        pacemaker_values = json.load(f)
else:
    # Otherwise initialize a new database. 
    pacemaker_values = {}

class IO:
    &#34;&#34;&#34;
    Simple class to do with file i/o and encryptiom/decryption. Consists of three class methods.
    &#34;&#34;&#34;
    @classmethod
    def encrypt(cls, some_phrase):
        # Given string (user or pass), encrypts using the shift value
        # Used when STORING new user into database

        length = len(some_phrase)
        conv = &#34;&#34;
        for i in range(length):
            conv = conv + chr(ord(some_phrase[i]) + SHIFT)
        return conv

    @classmethod
    def decrypt(cls, some_phrase):
        # Given string (user or pass), decrypts using the shift value
        # Used when READING existing user from database

        length = len(some_phrase)
        conv = &#34;&#34;
        for i in range(length):
            conv = conv + chr(ord(some_phrase[i]) - SHIFT)
        return conv

    @classmethod
    def dump(cls, path, data_dict):
        &#34;&#34;&#34;
        This function writes the current state of the user database to a json file. Having a local copy is very
        important, since this copy can be written to memory and accessed whether or not the DCM python script is running
        or not, and when the script reboots it remembers who has been registered.

        &#34;&#34;&#34;
        # &#39;w+&#39; mode is used to overwrite the previous database with the newest version.
        with open(path, &#39;w+&#39;) as dump_file:
            json.dump(data_dict, dump_file, indent=4, sort_keys=True)

    
def update_info(mode, low, up, AAmp, VAmp, APW, VPW, ASense, VSense, ARP, VRP, MaxSense, PVARP, FAVD, ReTime, RecTime, RespFact, AThresh, user):
    &#34;&#34;&#34;
    Neatly updates dictionary with pacemaker parameters as per requirements in documentation.
    &#34;&#34;&#34;
    UpdateMsg = &#34;&#34;

    if float(low) &gt; float(up):
        low = 50
        UpdateMsg = UpdateMsg + &#34;Lower Rate Limit Fixed to 50ppm \n&#34;
    elif float(low) &lt; 50:
        low = 50
    pacemaker_values.update({user :{&#34;Mode&#34;: mode, &#34;Up_Limit&#34;: (up), &#34;Low_Limit&#34;: (low), &#34;A_Amp&#34;: (AAmp), &#34;V_Amp&#34;: (VAmp), &#34;A_PW&#34;: (APW), &#34;V_PW&#34;: (VPW), &#34;A_Sense&#34;: (ASense), &#34;V_Sense&#34;: (VSense), &#34;ARP&#34;: (ARP), &#34;VRP&#34;: (VRP), &#34;Max_Sense&#34;: (MaxSense), &#34;PVARP&#34;: (PVARP), &#34;FAVD&#34;: (FAVD), &#34;ReTime&#34;: (ReTime), &#34;RecTime&#34;: (RecTime), &#34;RespFact&#34;: (RespFact), &#34;AThresh&#34;: (AThresh)}})
    IO.dump(UPLOAD_LOCATION, pacemaker_values)
    UpdateMsg = UpdateMsg + &#34;Pacemaker Values Updated Successfully&#34;
    print(UpdateMsg)
    messagebox.showinfo(&#34;Pacemaker Message&#34;, UpdateMsg)

&#39;&#39;&#39;
    try:
        &#34;&#34;&#34;
        This conditional checks that all the strings passed in as parameters convert properly. It is inside a try-except 
        to catch a faulty conversion
        &#34;&#34;&#34;
        if int(mode) and int(low) and int(up) and int(AAmp) and int(VAmp) and int(APW) and int(VPW) and int(ASense) and int(VSense) and int(ARP) and int(VRP) and int(MaxSense) and int(PVARP) and int(FAVD):
            pass
        
    except ValueError as e:

        &#34;&#34;&#34;
        In this situation, we have some invalid input, and it didn&#39;t convert properly. 
        
        &#34;&#34;&#34;
        messagebox.showinfo(&#34;Error&#34;, &#34;Invalid info! Re enter&#34;)
&#39;&#39;&#39;</code></pre>
</details>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-variables">Global variables</h2>
<dl>
<dt id="MiscFunctions.UPLOAD_LOCATION"><code class="name">var <span class="ident">UPLOAD_LOCATION</span></code></dt>
<dd>
<section class="desc"><p>DATABASE</p></section>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="MiscFunctions.update_info"><code class="name flex">
<span>def <span class="ident">update_info</span></span>(<span>mode, low, up, AAmp, VAmp, APW, VPW, ASense, VSense, ARP, VRP, MaxSense, PVARP, FAVD, ReTime, RecTime, RespFact, AThresh, user)</span>
</code></dt>
<dd>
<section class="desc"><p>Neatly updates dictionary with pacemaker parameters as per requirements in documentation.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_info(mode, low, up, AAmp, VAmp, APW, VPW, ASense, VSense, ARP, VRP, MaxSense, PVARP, FAVD, ReTime, RecTime, RespFact, AThresh, user):
    &#34;&#34;&#34;
    Neatly updates dictionary with pacemaker parameters as per requirements in documentation.
    &#34;&#34;&#34;
    UpdateMsg = &#34;&#34;

    if float(low) &gt; float(up):
        low = 50
        UpdateMsg = UpdateMsg + &#34;Lower Rate Limit Fixed to 50ppm \n&#34;
    elif float(low) &lt; 50:
        low = 50
    pacemaker_values.update({user :{&#34;Mode&#34;: mode, &#34;Up_Limit&#34;: (up), &#34;Low_Limit&#34;: (low), &#34;A_Amp&#34;: (AAmp), &#34;V_Amp&#34;: (VAmp), &#34;A_PW&#34;: (APW), &#34;V_PW&#34;: (VPW), &#34;A_Sense&#34;: (ASense), &#34;V_Sense&#34;: (VSense), &#34;ARP&#34;: (ARP), &#34;VRP&#34;: (VRP), &#34;Max_Sense&#34;: (MaxSense), &#34;PVARP&#34;: (PVARP), &#34;FAVD&#34;: (FAVD), &#34;ReTime&#34;: (ReTime), &#34;RecTime&#34;: (RecTime), &#34;RespFact&#34;: (RespFact), &#34;AThresh&#34;: (AThresh)}})
    IO.dump(UPLOAD_LOCATION, pacemaker_values)
    UpdateMsg = UpdateMsg + &#34;Pacemaker Values Updated Successfully&#34;
    print(UpdateMsg)
    messagebox.showinfo(&#34;Pacemaker Message&#34;, UpdateMsg)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="MiscFunctions.IO"><code class="flex name class">
<span>class <span class="ident">IO</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<section class="desc"><p>Simple class to do with file i/o and encryptiom/decryption. Consists of three class methods.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class IO:
    &#34;&#34;&#34;
    Simple class to do with file i/o and encryptiom/decryption. Consists of three class methods.
    &#34;&#34;&#34;
    @classmethod
    def encrypt(cls, some_phrase):
        # Given string (user or pass), encrypts using the shift value
        # Used when STORING new user into database

        length = len(some_phrase)
        conv = &#34;&#34;
        for i in range(length):
            conv = conv + chr(ord(some_phrase[i]) + SHIFT)
        return conv

    @classmethod
    def decrypt(cls, some_phrase):
        # Given string (user or pass), decrypts using the shift value
        # Used when READING existing user from database

        length = len(some_phrase)
        conv = &#34;&#34;
        for i in range(length):
            conv = conv + chr(ord(some_phrase[i]) - SHIFT)
        return conv

    @classmethod
    def dump(cls, path, data_dict):
        &#34;&#34;&#34;
        This function writes the current state of the user database to a json file. Having a local copy is very
        important, since this copy can be written to memory and accessed whether or not the DCM python script is running
        or not, and when the script reboots it remembers who has been registered.

        &#34;&#34;&#34;
        # &#39;w+&#39; mode is used to overwrite the previous database with the newest version.
        with open(path, &#39;w+&#39;) as dump_file:
            json.dump(data_dict, dump_file, indent=4, sort_keys=True)</code></pre>
</details>
<h3>Static methods</h3>
<dl>
<dt id="MiscFunctions.IO.decrypt"><code class="name flex">
<span>def <span class="ident">decrypt</span></span>(<span>some_phrase)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def decrypt(cls, some_phrase):
    # Given string (user or pass), decrypts using the shift value
    # Used when READING existing user from database

    length = len(some_phrase)
    conv = &#34;&#34;
    for i in range(length):
        conv = conv + chr(ord(some_phrase[i]) - SHIFT)
    return conv</code></pre>
</details>
</dd>
<dt id="MiscFunctions.IO.dump"><code class="name flex">
<span>def <span class="ident">dump</span></span>(<span>path, data_dict)</span>
</code></dt>
<dd>
<section class="desc"><p>This function writes the current state of the user database to a json file. Having a local copy is very
important, since this copy can be written to memory and accessed whether or not the DCM python script is running
or not, and when the script reboots it remembers who has been registered.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def dump(cls, path, data_dict):
    &#34;&#34;&#34;
    This function writes the current state of the user database to a json file. Having a local copy is very
    important, since this copy can be written to memory and accessed whether or not the DCM python script is running
    or not, and when the script reboots it remembers who has been registered.

    &#34;&#34;&#34;
    # &#39;w+&#39; mode is used to overwrite the previous database with the newest version.
    with open(path, &#39;w+&#39;) as dump_file:
        json.dump(data_dict, dump_file, indent=4, sort_keys=True)</code></pre>
</details>
</dd>
<dt id="MiscFunctions.IO.encrypt"><code class="name flex">
<span>def <span class="ident">encrypt</span></span>(<span>some_phrase)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def encrypt(cls, some_phrase):
    # Given string (user or pass), encrypts using the shift value
    # Used when STORING new user into database

    length = len(some_phrase)
    conv = &#34;&#34;
    for i in range(length):
        conv = conv + chr(ord(some_phrase[i]) + SHIFT)
    return conv</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-variables">Global variables</a></h3>
<ul class="">
<li><code><a title="MiscFunctions.UPLOAD_LOCATION" href="#MiscFunctions.UPLOAD_LOCATION">UPLOAD_LOCATION</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="MiscFunctions.update_info" href="#MiscFunctions.update_info">update_info</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="MiscFunctions.IO" href="#MiscFunctions.IO">IO</a></code></h4>
<ul class="">
<li><code><a title="MiscFunctions.IO.decrypt" href="#MiscFunctions.IO.decrypt">decrypt</a></code></li>
<li><code><a title="MiscFunctions.IO.dump" href="#MiscFunctions.IO.dump">dump</a></code></li>
<li><code><a title="MiscFunctions.IO.encrypt" href="#MiscFunctions.IO.encrypt">encrypt</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.2</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>